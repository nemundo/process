<?php


namespace Nemundo\Process\Template\Content\LargeText;


use Nemundo\Package\Bootstrap\FormElement\BootstrapLargeTextBox;
use Nemundo\Process\Content\Form\AbstractContentForm;
use Nemundo\Process\Template\Data\LargeText\LargeTextReader;

class LargeTextContentForm extends AbstractContentForm
{

    /**
     * @var BootstrapLargeTextBox
     */
    private $largeText;

    public function getContent()
    {

        $this->largeText=new BootstrapLargeTextBox($this);
        $this->largeText->label='Html';

        return parent::getContent(); // TODO: Change the autogenerated stub
    }


    protected function loadUpdateForm()
    {

        //$this->html->value = 'update';

        // reader

        $reader = new LargeTextReader();
        $reader->filter->andEqual($reader->model->id,$this->dataId);
        foreach ($reader->getData() as $textRow) {
            $this->largeText->value=$textRow->largeText;
        }


    }

    protected function onSubmit()
    {

        $type=new HtmlContentType($this->dataId);
        $type->parentId= $this->parentId;
        $type->html=$this->largeText->getValue();
        $type->saveType();

    }

}